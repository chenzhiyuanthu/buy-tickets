# buy-tickets

## 需求理解
  - 1. 用户可以一次性购买1-5张票
      -  当用户购买>1张票的时候他更希望这些票的距离近一点。
  - 2. 系统随机为用户分配座位
      - `随机`的含义
      - 基于我在大麦网等购票网站上的演唱会购票经历，用户是不知道在选定了价格区间之后（假定整个体育场的价格是一样的）是否被随机分配了座位。所以此处的随机并不需要做到真正意义上的随机（事实上就算随机了用户也并不知道），只需要保证在某个时间点四个区域的票数量不太悬殊即可。  

## 假设条件
  - 整个体育馆的票价是一样的
  - 用户购买多张票的满意度降序排列如下：
      - 所有票在同一排且不跨区
      - 出现跨排但是只跨一排
      - 出现跨排并且跨多排
      - 出现跨区(这种情况用户体验极差不应出现)

## 算法设计
  - 综合上述`需求理解`和`假设条件`，区域内蛇形排列是直觉上最好的选择，可以保证顶多跨一排但是由于用户购票组合的不确定性，极有可能出现明明存在最优解却选择次优解的情况（参考4, 2, 2这种购票情况中，4的用户购买了两排的座位而2, 2两位用户却在下一排连成了4个座位）。
  - 所以设计如下售票算法创造比较好的用户体验：
    - 1. 每个区域依次售一排票
    - 2. 遇到该排无法满足则停止该排售票，进行下一区售票，并记录该排空缺情况（如果有）
    - 3. 每次接到购票请求先排查之前空缺，如果有则填上
      - 如若有多个有多个匹配的空缺，优先选择前后排相邻座位少的空缺
    - 4. 若没有完美匹配的空缺则继续在当前购票队伍之后进行购票
    - 5. 若场馆中再无完美匹配的空缺，则寻找同区跨排座位
    - 6. 若以上条件皆不满足则不受理该次购票请求
    
## RUN
  - `cd frontend`
  - `npm install`
  - `npm start` 或者 `ng serve`(需要先安装angular/cli `npm install -g @angular/cli`)
  - 浏览器打开 localhost:4200


